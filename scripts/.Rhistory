map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", size=2),
legend.box.margin = margin(116, 6, 6, 6)
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 2),
legend.box.margin = margin(6, 6, 6, 6)
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 20, 20, 6)
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 6, 6, 20)
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
?margin
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 20, 6, 20)
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 40, 6, 20)
)
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 40, 6, 20)
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 60, 6, 6), units = 'line',
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 60, 6, 6),
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(6, 100, 6, 100),
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:5]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(2, 90, 6, 90),
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
preds <- preds[[1:2]]
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(10, 60, 4, 60),
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(20, 60, 4, 60),
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
map_maker_fn <- function(x, y, path_dir, name){
spp <- gsub('_', ' ', name)
occurrence <- filter(y, species == spp)
pred <- as.data.frame(x, xy= T)
pred <- pred %>%
rename(species = 3) %>%
mutate(species = jitter(species))
ggplot() +
geom_tile(data = hillshade, aes(x = x, y = y, fill = lyr1))  +
scale_fill_gradient(low = "grey50", high = "grey100") +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = dem, aes(x = x, y = y, fill = elevation_1KMmd_GMTEDmd)) +
scale_fill_viridis_c(direction = -1, alpha = 0.3) +
guides(fill = 'none') +
ggnewscale::new_scale_fill() +
geom_tile(data = pred, aes(x = x, y = y, fill = species)) +
scale_fill_distiller('Probability of suitable habitat      ',
palette = "RdPu", direction = 1,
breaks=c(1, 2.5, 4), limits = c(0.9,4.1),
labels=c("Mild", "Medium", "High")) +
geom_sf(data = st, fill = NA, lwd = 2) +
geom_sf(data = occurrence, shape = 18, color = 'black') +
coord_sf(xlim = c(gb_bb[[1]], gb_bb[[3]]),
ylim = c(gb_bb[[2]], gb_bb[[4]]), expand = F) +
theme_void() +
theme(legend.position = 'bottom',
legend.box.background = element_rect(color="black", linewidth = 1),
legend.box.margin = margin(2, 60, 2, 60),
)
ggsave(filename = file.path(path_dir, spp), plot = last_plot(),
width = 480, height = 480, units = "px",
dpi = 72, device = 'png', bg = 'white')
}
for (i in 1:(dim(preds)[3])){
map_maker_fn(x = preds[[i]], y = occ_data, name = names(preds[[i]]), path_dir = '../figures/maps')
}
gc()
